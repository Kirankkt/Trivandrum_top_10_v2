<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivandrum Top 10 | The City's Definitive Rankings</title>

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5WKSPYBGCN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-5WKSPYBGCN');

        // Track SPA page views on hash change
        window.addEventListener('hashchange', function () {
            gtag('event', 'page_view', {
                page_path: window.location.hash || '#/',
                page_title: document.title
            });
        });
    </script>

    <!-- Essential Meta Tags -->
    <meta name="description"
        content="The definitive, data-driven guide to Trivandrum's best localities, restaurants, cafes, hotels, and lifestyle. Objective rankings updated with real-time API data.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://trivandrumtop10.netlify.app/">
    <meta property="og:title" content="Trivandrum Top 10 | The City's Definitive Rankings">
    <meta property="og:description"
        content="Discover the best of Thiruvananthapuram with objective, data-driven rankings for neighborhoods, dining, and more.">
    <meta property="og:image" content="https://trivandrumtop10.netlify.app/images/hero_main.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://trivandrumtop10.netlify.app/">
    <meta property="twitter:title" content="Trivandrum Top 10 | The City's Definitive Rankings">
    <meta property="twitter:description"
        content="Discover the best of Thiruvananthapuram with objective, data-driven rankings for neighborhoods, dining, and more.">
    <meta property="twitter:image" content="https://trivandrumtop10.netlify.app/images/hero_main.png">

    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

    <!-- Supabase JS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Leaflet MarkerCluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <!-- Chart.js for Admin Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>

<body>
    <!-- Dark Top Bar -->
    <div class="top-bar">
        <div class="top-bar-content">
            <div class="top-bar-left">
                <!-- Left intentionally empty for clean look -->
            </div>
            <div class="top-bar-right">
                <a href="#/methodology">Methodology</a>
                <a href="#/about">About</a>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header">
        <div class="header-content">
            <a href="#/" class="logo-new">
                <span class="logo-text-new"><span class="logo-tvm">TRIVANDRUM</span><br><strong class="logo-top10">TOP
                        10</strong></span>
            </a>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>

            <nav class="main-nav">
                <a href="#/" class="nav-link active">Home</a>
                <div class="nav-group">
                    <button class="nav-group-trigger">
                        <span>Live</span>
                        <span class="nav-group-arrow ui-chevron-down"></span>
                    </button>
                    <div class="nav-dropdown">
                        <a href="#/localities" class="nav-dropdown-item">Localities</a>
                    </div>
                </div>
                <div class="nav-group">
                    <button class="nav-group-trigger">
                        <span>Eat</span>
                        <span class="nav-group-arrow ui-chevron-down"></span>
                    </button>
                    <div class="nav-dropdown">
                        <a href="#/restaurants" class="nav-dropdown-item">Restaurants</a>
                        <a href="#/cafes" class="nav-dropdown-item">Cafes</a>
                    </div>
                </div>
                <div class="nav-group">
                    <button class="nav-group-trigger">
                        <span>Stay</span>
                        <span class="nav-group-arrow ui-chevron-down"></span>
                    </button>
                    <div class="nav-dropdown">
                        <a href="#/hotels" class="nav-dropdown-item">Hotels</a>
                    </div>
                </div>
                <div class="nav-group">
                    <button class="nav-group-trigger">
                        <span>Shop</span>
                        <span class="nav-group-arrow ui-chevron-down"></span>
                    </button>
                    <div class="nav-dropdown">
                        <a href="#/malls" class="nav-dropdown-item">Malls</a>
                        <a href="#/boutiques" class="nav-dropdown-item">Boutiques</a>
                        <a href="#/specialty-shops" class="nav-dropdown-item">Specialty Shops</a>
                    </div>
                </div>
                <div class="nav-group">
                    <button class="nav-group-trigger">
                        <span>Culture</span>
                        <span class="nav-group-arrow ui-chevron-down"></span>
                    </button>
                    <div class="nav-dropdown">
                        <a href="#/museums" class="nav-dropdown-item">Museums</a>
                        <a href="#/religious-sites" class="nav-dropdown-item">Religious Sites</a>
                    </div>
                </div>
                <div class="nav-group">
                    <button class="nav-group-trigger">
                        <span>Services</span>
                        <span class="nav-group-arrow ui-chevron-down"></span>
                    </button>
                    <div class="nav-dropdown">
                        <a href="#/healthcare" class="nav-dropdown-item">Healthcare</a>
                        <a href="#/education" class="nav-dropdown-item">Education</a>
                        <a href="#/banking" class="nav-dropdown-item">Banking</a>
                    </div>
                </div>
                <a href="#/map" class="nav-link">Map</a>
            </nav>

            <!-- Search Bar -->
            <div class="search-bar">
                <span class="search-icon">&#128269;</span>
                <input type="text" id="search-input" placeholder="Search..." autocomplete="off">
            </div>
        </div>
    </header>

    <main id="app">
        <!-- Dynamic content will be loaded here -->
        <div class="loading">Loading rankings...</div>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section footer-brand">
                <a href="#/" class="footer-logo">TRIVANDRUM TOP 10</a>
                <p class="footer-tagline">The city's most trusted, data-driven rankings.</p>
                <p class="footer-description">We use real-time Google API data and local market benchmarks to provide
                    100% objective insights across 20+ neighborhoods.</p>
            </div>

            <div class="footer-section">
                <h4 class="footer-heading">Explore</h4>
                <div class="footer-links">
                    <a href="#/localities">Localities</a>
                    <a href="#/restaurants">Restaurants</a>
                    <a href="#/cafes">Cafes</a>
                    <a href="#/hotels">Hotels</a>
                    <a href="#/map">Interactive Map</a>
                </div>
            </div>

            <div class="footer-section">
                <h4 class="footer-heading">Company</h4>
                <div class="footer-links">
                    <a href="#/methodology">Methodology</a>
                    <a href="#/customize">Custom Ranking Engine</a>
                    <a href="#/about">About the Project</a>
                    <a href="#/contact">Contact Us</a>
                </div>
            </div>

            <div class="footer-section">
                <h4 class="footer-heading">Data Engine</h4>
                <div class="footer-links">
                    <span class="footer-text">Google Maps Platform</span>
                    <span class="footer-text">Local Real Estate APIs</span>
                    <span class="footer-text">Transit & Mobility Data</span>
                    <span class="footer-text">Topographic Information</span>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <p class="footer-copyright">&copy; 2025 Trivandrum Top 10. All rights reserved.</p>
                <p class="footer-disclaimer">Zero human bias • No sponsored placements • API-verified metrics</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/utils/analytics.js"></script>
    <script src="js/utils/image-optimizer.js"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/utils/data-manager.js"></script>
    <script src="js/components/shared-components.js"></script>
    <script src="js/search.js"></script>
    <script src="js/views/ranking-view.js"></script>
    <script src="js/views/customize-view.js"></script>
    <script src="js/views/methodology-view.js"></script>
    <script src="js/views/about-view.js"></script>
    <script src="js/views/detail-view.js"></script>
    <script src="js/views/map-explorer-view.js"></script>
    <script src="js/views/dining-view.js"></script>
    <script src="js/views/dining-customize-view.js"></script>
    <script src="js/views/discover-view.js"></script>
    <script src="js/views/home-view.js"></script>
    <script src="js/views/category-stub-views.js"></script>
    <script src="js/views/entity-detail-view.js"></script>
    <script src="js/views/admin-view.js"></script>
    <script src="app.js"></script>

    <!-- Mobile Menu Script -->
    <script>
        (function () {
            const toggle = document.querySelector('.mobile-menu-toggle');
            const nav = document.querySelector('.main-nav');
            const header = document.querySelector('.main-header');

            if (toggle && nav) {
                toggle.addEventListener('click', function () {
                    const isOpen = nav.classList.toggle('nav-open');
                    toggle.classList.toggle('active');
                    toggle.setAttribute('aria-expanded', isOpen);
                    document.body.classList.toggle('nav-open-body', isOpen);
                });

                // Close menu when clicking a link
                nav.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        nav.classList.remove('nav-open');
                        toggle.classList.remove('active');
                        toggle.setAttribute('aria-expanded', 'false');
                        document.body.classList.remove('nav-open-body');
                    });
                });

                // Handle dropdown toggles on mobile (tap to open)
                document.querySelectorAll('.nav-group-trigger').forEach(trigger => {
                    trigger.addEventListener('click', function (e) {
                        if (window.innerWidth <= 900) {
                            e.preventDefault();
                            const parent = this.closest('.nav-group');
                            const wasOpen = parent.classList.contains('dropdown-open');

                            // Close all other dropdowns
                            document.querySelectorAll('.nav-group').forEach(g => {
                                g.classList.remove('dropdown-open');
                            });

                            // Toggle this one
                            if (!wasOpen) {
                                parent.classList.add('dropdown-open');
                            }
                        }
                    });
                });
            }
        })();
    </script>
</body>

</html>